{% extends 'app/base.html' %}
{% load static %}
{% load humanize %}  

{% block extra_css %}
<link href="{% static 'app/css/product_detail.css' %}" rel="stylesheet" />
{% endblock extra_css %}

{% block main_content %}
<div class="container my-5">
    <h1 class="product-title fw-bold mb-3">{{ product.name }}</h1>
    <div class="product-header-info d-flex align-items-center mb-4">
        <div class="product-rating me-3">
            <i class="fas fa-star text-warning"></i> 4.9/5 (100 đánh giá)
        </div>
        <span class="text-muted">|</span>
        <span class="ms-3 text-success fw-bold">Còn hàng</span>
    </div>

    <div class="row">
        
        <div class="col-lg-5">
            <div class="product-gallery card p-3 mb-4 border-0">
                <img src="{{ product.ImageURL }}" class="img-fluid main-product-img" alt="{{ product.name }}">
                
                </div>

            <div class="tech-specs card p-4 border-0 shadow-sm">
                <h5 class="fw-bold mb-3">Thông số kỹ thuật</h5>
                <table class="table table-borderless table-sm">
                    <tbody>
                        <tr><th>Màn hình</th><td>6.7 inch, Dynamic AMOLED</td></tr>
                        <tr><th>Chip</th><td>{{ product.chip_model|default:"Apple A19 Bionic" }}</td></tr>
                        <tr><th>RAM</th><td>{{ product.ram_size|default:"8GB" }}</td></tr>
                        <tr><th>Pin</th><td>5000 mAh</td></tr>
                    </tbody>
                </table>
                <a href="#fullspecs-tab" class="btn btn-outline-dark btn-sm mt-2">Xem chi tiết cấu hình</a>
            </div>
        </div>

        <div class="col-lg-7">
            
            <div class="config-selection mb-4">
                <h5 class="fw-bold mb-3">Chọn phiên bản:</h5>
                <div class="btn-group mb-3" role="group" aria-label="Capacity options">
                    <input type="radio" class="btn-check" name="capacity" id="cap128" checked>
                    <label class="btn btn-outline-primary config-btn" for="cap128">128GB (Giá tốt nhất)</label>

                    <input type="radio" class="btn-check" name="capacity" id="cap256">
                    <label class="btn btn-outline-primary config-btn" for="cap256">256GB</label>
                    
                    <input type="radio" class="btn-check" name="capacity" id="cap512">
                    <label class="btn btn-outline-primary config-btn" for="cap512">512GB</label>
                </div>
                
                <h6 class="fw-bold mt-2">Chọn màu:</h6>
                <div class="color-options d-flex">
                    <button class="color-dot me-2 active" style="background-color: #f75d59;" title="Đỏ"></button>
                    <button class="color-dot me-2" style="background-color: #000;" title="Đen"></button>
                    <button class="color-dot me-2" style="background-color: #f5f5dc;" title="Vàng"></button>
                </div>
            </div>

            <div class="price-offer-box border p-4 rounded shadow-sm">
                <h3 class="price-sale text-danger display-5 fw-bold mb-0">
                        {{ product.price|floatformat:0|intcomma }}₫
                    </h3>
                <div class="promotion-box p-3 mt-3 bg-light rounded">
                    <h5 class="text-success mb-2"><i class="fas fa-gift me-2"></i> Ưu đãi & Quà tặng</h5>
                    <ul class="list-unstyled small">
                        <li><i class="fas fa-check-circle text-success me-2"></i> Trả góp 0% (Hỗ trợ 12 tháng).</li>
                        <li><i class="fas fa-check-circle text-success me-2"></i> Tặng voucher giảm giá 500K mua phụ kiện.</li>
                        <li><i class="fas fa-check-circle text-success me-2"></i> Bảo hành mở rộng 1 đổi 1.</li>
                    </ul>
                </div>
            </div>

            <div class="d-grid gap-2 mt-4">
                <button data-product-id="{{ product.id }}" data-action="add" class="btn btn-danger btn-lg update-cart fw-bold">
                    <i class="fas fa-shopping-cart me-2"></i> MUA NGAY
                </button>
                <div class="row">
                    <div class="col">
                        <button class="btn btn-outline-danger w-100 fw-bold">TRẢ GÓP 0%</button>
                    </div>
                    <div class="col">
                        <button class="btn btn-outline-dark w-100 fw-bold">TRẢ GÓP QUA THẺ</button>
                    </div>
                </div>
            </div>
            
            <div class="hotline-contact text-center mt-3 p-2 border rounded bg-white">
                <p class="mb-0 small">Gọi tư vấn: <a href="tel:19001234" class="text-danger fw-bold">1900 1234</a> (Miễn phí)</p>
            </div>
        </div>
    </div>
    
    <hr class="my-5">

    <div class="product-tabs-section">
        <ul class="nav nav-tabs" id="productTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="description-tab" data-bs-toggle="tab" data-bs-target="#description" type="button" role="tab" aria-controls="description" aria-selected="true">Mô tả sản phẩm</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="fullspecs-tab" data-bs-toggle="tab" data-bs-target="#fullspecs" type="button" role="tab" aria-controls="fullspecs" aria-selected="false">Thông số kỹ thuật chi tiết</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab" aria-controls="reviews" aria-selected="false">Đánh giá & Bình luận</button>
            </li>
        </ul>
        
        <div class="tab-content border border-top-0 p-4 bg-white" id="productTabContent">
            <div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">
                <h4 class="mb-3">Mô tả chi tiết {{ product.name }}</h4>
                <p>{{ product.description|default:"Đây là nơi hiển thị mô tả chi tiết sản phẩm với hình ảnh, video và nội dung phong phú tương tự như các trang e-commerce lớn." }}</p>
                <p class="text-danger fw-bold">Lưu ý: Nội dung chi tiết cần được nhập vào trường 'description' trong Model Product của bạn.</p>
            </div>
            
            <div class="tab-pane fade" id="fullspecs" role="tabpanel" aria-labelledby="fullspecs-tab">
                <h4 class="mb-3">Bảng thông số kỹ thuật chi tiết</h4>
                <table class="table table-striped table-bordered">
                    <tbody>
                        <tr><th>Công nghệ màn hình</th><td>Dynamic AMOLED 2X</td></tr>
                        <tr><th>Độ phân giải</th><td>2K+ (1344 x 2992 Pixels)</td></tr>
                        <tr><th>Bộ xử lý (CPU)</th><td>{{ product.chip_model|default:"Apple A19 Bionic" }}</td></tr>
                        <tr><th>Bộ nhớ trong</th><td>128GB/256GB/512GB</td></tr>
                        </tbody>
                </table>
            </div>

            <div class="tab-pane fade" id="reviews" role="tabpanel" aria-labelledby="reviews-tab">
                <div class="row">
                    <div class="col-lg-4 text-center border-end">
                        <h2 class="display-3 fw-bold text-warning">4.9/5</h2>
                        <p class="text-muted">(100 lượt đánh giá)</p>
                        <button class="btn btn-warning mt-2 fw-bold">Gửi đánh giá của bạn</button>
                    </div>
                    <div class="col-lg-8">
                        <h5>Bình luận của khách hàng (Cần phát triển Model/View cho Comment)</h5>
                        <ul class="list-unstyled mt-3">
                            <li class="border-bottom pb-2 mb-2">
                                <i class="fas fa-star text-warning"></i> 5/5 | <span class="fw-bold">Nguyễn Văn A</span>
                                <p class="small mb-1">Sản phẩm dùng rất mượt, pin trâu, giao hàng nhanh chóng.</p>
                            </li>
                            </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</div>
{% endblock main_content %}