{% extends 'app/base.html' %}
{% block main_content %}
<div class="container mb-5">
    <h2 class="mt-4 mb-3">Hệ thống cửa hàng (Django)</h2>

    <div class="store-container" style="display: flex; height: 80vh; background: #fff; border-radius: 10px; overflow: hidden; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
        <div class="store-sidebar" style="width: 35%; overflow-y: auto; padding: 20px; border-right: 1px solid #ddd;">
            {% for store in stores %}
            <div class="store-item"
                 style="padding: 15px; border: 1px solid #eee; border-radius: 8px; margin-bottom: 15px; cursor: pointer;"
                 onclick="changeMap('{{ store.map_url }}', this)">
                <div style="font-weight: bold; font-size: 16px;">{{ store.name }}</div>
                <div style="font-size: 13px; color: #666;"><i class="fas fa-map-marker-alt"></i> {{ store.address }}</div>
                <div style="font-size: 13px; color: #d70018; font-weight: bold;">{{ store.phone }}</div>
            </div>
            {% endfor %}
        </div>

        <div class="map-container" style="width: 65%;">
            <iframe
                id="google-map-iframe"
                src="{{ stores.0.map_url }}"
                width="100%"
                height="100%"
                style="border:0;"
                allowfullscreen=""
                loading="lazy">
            </iframe>
        </div>
    </div>
</div>

<script>
    function changeMap(url, element) {
        // Thay đổi src của iframe khi click vào cửa hàng
        document.getElementById('google-map-iframe').src = url;

        // Reset style các item khác
        const items = document.querySelectorAll('.store-item');
        items.forEach(item => {
            item.style.borderColor = '#eee';
            item.style.backgroundColor = '#fff';
        });

        // Highlight item đang chọn
        element.style.borderColor = '#d70018';
        element.style.backgroundColor = '#fffafa';
    }
</script>
{% endblock %}